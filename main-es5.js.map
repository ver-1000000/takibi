{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/flame.ts","webpack:///src/app/flame/flame.component.ts","webpack:///src/app/flame/flame.component.html","webpack:///src/app/key-track-by.pipe.ts","webpack:///src/app/safe.pipe.ts","webpack:///src/environments/environment.firebase.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","ERR_MSG","AppComponent","angularFireAuth","angularFirestore","cdr","flameCollection","collection","flames$","valueChanges","signInAnonymously","onAuthStateChanged","user","flameDocument","doc","uid","pipe","value","subscribe","selfFlame","deleteOneMinuteAgoCollection","ref","oneMinuteAgo","d","Date","setMinutes","getMinutes","where","get","querySnapshot","batch","firestore","forEach","delete","commit","alert","hue","x","y","set","merge","markForCheck","detectPoint","selector","templateUrl","styleUrls","changeDetection","OnPush","AppModule","register","enabled","production","initializeApp","firebase","declarations","imports","providers","bootstrap","Flame","opt","updatedAt","Math","ceil","random","VOLUME","SIZE","DURATION","getUUID","replace","c","r","v","toString","getFireSeeds","Array","map","_","i","cx","cy","FlameComponent","fireSeeds","KeyTrackByPipe","key","item","name","SafePipe","sanitizer","type","String","bypassSecurityTrustHtml","bypassSecurityTrustStyle","bypassSecurityTrustScript","bypassSecurityTrustUrl","bypassSecurityTrustResourceUrl","environment","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","bootstrapModule","catch","err","console","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import {\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n  Component,\n  OnInit,\n} from '@angular/core';\n\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport {\n  AngularFirestore,\n  AngularFirestoreDocument,\n} from '@angular/fire/firestore';\nimport 'firebase/firestore';\n\nimport { first, map } from 'rxjs/operators';\n\nimport { Flame } from './flame';\n\nconst ERR_MSG =\n  'Firebaseでなにか問題が発生している可能性があります。 しばらく経ってから再度更新して下さい。';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AppComponent implements OnInit {\n  private readonly flameCollection = this.angularFirestore.collection('flames');\n  private flameDocument?: AngularFirestoreDocument;\n  private selfFlame?: Flame;\n  flames$ = this.flameCollection.valueChanges();\n\n  constructor(\n    private angularFireAuth: AngularFireAuth,\n    private angularFirestore: AngularFirestore,\n    private cdr: ChangeDetectorRef\n  ) {}\n\n  /**\n   * - 古い炎を削除する。\n   * - 匿名ログインし、ドキュメントを準備する。\n   */\n  ngOnInit() {\n    this.angularFireAuth.signInAnonymously();\n    this.angularFireAuth.onAuthStateChanged(user => {\n      if (user == null) {\n        return;\n      }\n      this.flameDocument = this.flameCollection.doc(user.uid);\n      this.flameDocument\n        .valueChanges()\n        .pipe(first())\n        .pipe(map(value => new Flame({ ...value, id: user.uid })))\n        .subscribe(value => (this.selfFlame = value));\n      this.deleteOneMinuteAgoCollection();\n    });\n  }\n\n  /** 最終更新日が1分前以前のコレクションを全て削除する。 */\n  private deleteOneMinuteAgoCollection() {\n    return this.angularFirestore\n      .collection('flames', ref => {\n        const oneMinuteAgo = ((d = new Date()) =>\n          new Date(d.setMinutes(d.getMinutes() - 1)))();\n        return ref.where('updatedAt', '<=', oneMinuteAgo);\n      })\n      .get()\n      .subscribe(querySnapshot => {\n        const batch = this.angularFirestore.firestore.batch();\n        querySnapshot.forEach(doc => batch.delete(doc.ref));\n        return batch.commit();\n      });\n  }\n\n  /** SVGクリック時に座標を決定し、炎の追加もしくは移動を行う。 */\n  detectPoint(e: MouseEvent) {\n    if (this.selfFlame == null) {\n      alert(ERR_MSG);\n      return;\n    }\n    const { id, hue } = this.selfFlame;\n    this.selfFlame = new Flame({ id, hue, x: e.x, y: e.y });\n    if (this.flameDocument) {\n      this.flameDocument.set({ ...this.selfFlame }, { merge: true });\n    }\n    this.cdr.markForCheck();\n  }\n}\n","<svg class=\"canvas\" (click)=\"detectPoint($event)\">\n  <svg:g\n    appFlame\n    class=\"flame\"\n    attr.transform=\"translate({{ flame.x }}, {{ flame.y }})\"\n    [hue]=\"flame.hue\"\n    *ngFor=\"let flame of flames$ | async; trackBy: 'id' | keyTrackBy\"\n  ></svg:g>\n</svg>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { ServiceWorkerModule } from '@angular/service-worker';\nimport { AngularFireModule } from '@angular/fire';\nimport { AngularFireAnalyticsModule } from '@angular/fire/analytics';\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\n\nimport { environment } from '../environments/environment';\n\nimport { AppComponent } from './app.component';\nimport { FlameComponent } from './flame/flame.component';\n\nimport { SafePipe } from './safe.pipe';\nimport { KeyTrackByPipe } from './key-track-by.pipe';\n\n@NgModule({\n  declarations: [AppComponent, FlameComponent, SafePipe, KeyTrackByPipe],\n  imports: [\n    BrowserModule,\n    ServiceWorkerModule.register('ngsw-worker.js', {\n      enabled: environment.production,\n    }),\n    AngularFireModule.initializeApp(environment.firebase),\n    AngularFireAnalyticsModule,\n    AngularFirestoreModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","/** 炎クラス。 */\nexport class Flame {\n  id: string | null;\n  /** 炎の色相。 0-360の値を取る。 */\n  hue: number;\n\n  x: number;\n\n  y: number;\n  /** 最終更新日。 */\n  updatedAt: Date;\n\n  constructor(opt: Partial<Flame> = {}) {\n    this.id = opt.id ?? null;\n    this.updatedAt = new Date();\n    this.hue = opt.hue ?? Math.ceil(Math.random() * 360);\n    this.x = opt.x ?? 0;\n    this.y = opt.y ?? 0;\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\n\n/** 火種となるcircle要素の情報。 */\ninterface FireSeed {\n  id: number;\n  cx: number;\n  cy: number;\n}\n\n/** 火種の基準大きさ。 */\nconst VOLUME = 30;\n/** 火種の数。 */\nconst SIZE = 40;\n/** 炎のアニメーション寿命。 */\nconst DURATION = 1500;\n\n/** UUIDを取得する。 */\nconst getUUID = () =>\n  'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (Math.random() * 16) | 0;\n    const v = c == 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n\n/** 火種群を作成する。 */\nconst getFireSeeds = (): FireSeed[] => {\n  const random = () => Math.ceil(Math.random() * VOLUME);\n  return [...Array(SIZE)].map((_, i) => ({\n    id: i,\n    cx: random(),\n    cy: random(),\n  }));\n};\n\n/**\n * 炎コンポーネント。\n */\n@Component({\n  selector: '[appFlame]',\n  templateUrl: './flame.component.html',\n  styleUrls: ['./flame.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FlameComponent {\n  readonly id = getUUID();\n  readonly fireSeeds = getFireSeeds();\n  readonly VOLUME = VOLUME;\n  readonly DURATION = DURATION;\n  @Input() hue = 0;\n}\n","<svg:radialGradient [attr.id]=\"id\">\n  <stop offset=\"0\" stop-color=\"hsl(10, 90%, 80%)\" />\n  <stop offset=\".4\" attr.stop-color=\"hsl({{ hue }}, 90%, 60%)\" />\n  <stop offset=\"1\" stop-color=\"hsl(40, 90%, 0%)\" />\n</svg:radialGradient>\n\n<svg:circle\n  attr.fill=\"url(#{{ id }})\"\n  [attr.r]=\"VOLUME\"\n  [attr.cx]=\"seed.cx\"\n  [attr.cy]=\"seed.cy\"\n  [style.animationDuration.ms]=\"DURATION\"\n  [style.animationDelay.ms]=\"i * DURATION / fireSeeds.length\"\n  *ngFor=\"let seed of fireSeeds; index as i; trackBy: 'id' | keyTrackBy\"\n/>\n","import { Pipe, PipeTransform, TrackByFunction } from '@angular/core';\n\n/**\n * `{ id: number, name: string }[]`のような、ユニークな値を持つオブジェクトの配列に対して、\n * 簡単に{@link https://angular.io/api/core/TrackByFunction TrackByFunction}を設定するためのパイプ。\n *\n * @example\n * <!-- `{ id: number, name: string }[]` -->\n * <div *ngFor=\"let item of items; trackBy: 'id' | keyTrackBy\">{{ item.id }}: {{ item.name }}</div>\n *\n * <!-- `{ id: number | null, name: string | null }[]` 実際は↑の型じゃなくて←みたいな型になりがちだよね、、、 -->\n * <input name=\"name\" [(ngModel)]=\"item.name\" *ngFor=\"let item of items; trackBy: null | keyTrackBy\">\n */\n@Pipe({ name: 'keyTrackBy' })\nexport class KeyTrackByPipe implements PipeTransform {\n  transform<T>(key: null | keyof T): TrackByFunction<T> {\n    return (i: number, item: T) => (key == null ? item : item[key]);\n  }\n}\n","/**\n * DOM\u001b$B$N%W%m%Q%F%#$K!\"\u001b(BXSS\u001b$B@H<e@-$N2DG=@-$r;}$DJ8;zNs$r%5%K%?%$%:$9$k!#\u001b(B\n *\n * SEE ALSO: {@link https://angular.io/guide/security#xss}\n */\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeHtml, SafeStyle, SafeScript, SafeUrl, SafeResourceUrl } from '@angular/platform-browser';\n\n@Pipe({ name: 'safe' })\nexport class SafePipe implements PipeTransform {\n  constructor(protected sanitizer: DomSanitizer) {\n  }\n\n  transform(value: string | number, type: string): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\n    value = String(value);\n    switch (type) {\n      case 'html':\n        return this.sanitizer.bypassSecurityTrustHtml(value);\n      case 'style':\n        return this.sanitizer.bypassSecurityTrustStyle(value);\n      case 'script':\n        return this.sanitizer.bypassSecurityTrustScript(value);\n      case 'url':\n        return this.sanitizer.bypassSecurityTrustUrl(value);\n      case 'resourceUrl':\n        return this.sanitizer.bypassSecurityTrustResourceUrl(value);\n      default:\n        throw new Error(`Unable to bypass security for invalid type: ${type}`);\n    }\n  }\n}\n","export const environment = {\n  apiKey: 'AIzaSyAHN_oPqrdltONR8VVxMXe6iVZfgJDehhU',\n  authDomain: 'takibi-2d9a2.firebaseapp.com',\n  databaseURL: 'https://takibi-2d9a2.firebaseio.com',\n  projectId: 'takibi-2d9a2',\n  storageBucket: 'takibi-2d9a2.appspot.com',\n  messagingSenderId: '751221724633',\n  appId: '1:751221724633:web:e4c3a5a3a8def2d05575c8',\n  measurementId: 'G-HQJF1V5Z9'\n};\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nimport { environment as firebase } from './environment.firebase';\n\nexport const environment = {\n  firebase,\n  production: false,\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}